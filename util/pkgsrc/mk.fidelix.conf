# DO NOT EDIT THIS FILE
# It is automatically generated when installing pkgsrc and will be overwritten
# on updates.

.ifdef BSD_PKG_MK	# begin pkgsrc settings

ACCEPTABLE_LICENSES+=	gnu-agpl-v3
LOCALPATCHES=		/usr/src/util/pkgsrc/patches
SSLDIR=			/etc/ssl

OS_DISTRIBUTION=	Fidelix
TOOLS_PLATFORM.xz=
TOOLS_PLATFORM.find=	/bin/find
TOOLS_PLATFORM.xargs=	/bin/xargs
TOOLS_PLATFORM.makeinfo=/usr/bin/makeinfo

# Use MIT Kerberos implementation instead of heimdal (heimdal is broken on
# Fidelix & all other musl based systems)
KRB5_DEFAULT=mit-krb5

# Add libexecinfo for lang/llvm and lang/libLLVM
.if "${DISTNAME}" == "llvm-${LLVM_VERSION}.src" || "${HOMEPAGE}" == "https://llvm.org/"
BUILD_DEPENDS+=		libexecinfo>=1.1:../../devel/libexecinfo
DEPENDS+=		libexecinfo>=1.1:../../devel/libexecinfo
.include "../../devel/libexecinfo/buildlink3.mk"
.endif

# Add libexecinfo for graphics/MesaLib
.if "${PKGNAME}" == "${DISTNAME:S/mesa/MesaLib/}"
BUILD_DEPENDS+=		libexecinfo>=1.1:../../devel/libexecinfo
DEPENDS+=		libexecinfo>=1.1:../../devel/libexecinfo
.include "../../devel/libexecinfo/buildlink3.mk"
.endif

# Xload is broken on Fidelix and not important enough to be a high priority
# fix. Skip it for now.
#
# We pretend it is a metapackage just so that it can still be installed to
# satisfy dependencies.
#
.if "${COMMENT}" == "System load average display for X"
META_PACKAGE=		yes
.endif

# Netpbm has a weird usage of pax that does not work on Fidelix. Set it to skip
# the pax step.
.if "${COMMENT}" == "Toolkit for conversion of images between different formats"
TOOLS_PLATFORM.pax=	/bin/true
.endif

# Force mozilla-rootcerts to use GAWK instead of BusyBox AWK (BusyBox AWK is
# not sufficient for the mozilla-rootcerts script).
.if "${COMMENT}" == "Root CA certificates from the Mozilla Project"
BUILD_DEPENDS+=		gawk>=5.0:../../lang/gawk
DEPENDS+=		gawk>=5.0:../../lang/gawk
TOOLS_PLATFORM.awk=	${LOCALBASE}/bin/gawk
.endif

.if exists(PLIST.Fidelix)
PLIST_SRC=PLIST.Fidelix
.endif

.endif

